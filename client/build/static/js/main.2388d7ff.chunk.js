(this["webpackJsonpc.url"]=this["webpackJsonpc.url"]||[]).push([[0],{53:function(e,t,a){},64:function(e,t,a){e.exports=a(98)},98:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(11),l=a.n(c),o=a(30),s=a(6),u=a(10),i=a(20),m=(a(73),a(55)),p=a(5),d={isLoggedIn:!1,isLoading:!0,user:null},E={shortUrl:"",shortened:!1},f={urls:[],loading:!0},g=Object(i.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"LOGIN_FAILURE":return Object(p.a)(Object(p.a)({},e),{},{isLoggedIn:!1,isLoading:!1,user:null});case"LOGIN_SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{isLoggedIn:!0,isLoading:!1,user:r});case"LOGOUT":return Object(p.a)(Object(p.a)({},e),{},{isLoggedIn:!1,isLoading:!1,user:null});default:return Object(p.a)({},e)}},url:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"SHORTEN_URL_SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{shortUrl:r.shortUrl,shortened:!0});case"SHORTEN_URL_FAILURE":return Object(p.a)(Object(p.a)({},e),{},{shortUrl:"",shortened:!1});default:return e}},dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"DASHBOARD_REQUEST":return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case"GET_DASHBOARD_SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{urls:r,loading:!1});case"GET_DASHBOARD_FAILURE":return Object(p.a)(Object(p.a)({},e),{},{urls:[],loading:!1});default:return e}}}),h=Object(i.createStore)(g,{},Object(i.applyMiddleware)(m.a)),b=a(7),y=a.n(b),v=a(15),S=a(8),O=a(56),U=a.n(O).a.create();U.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){Promise.reject(e)}));var L=U,x={signup:function(e){return L.post("/api/auth/signup",e)},login:function(e){return L.post("/api/auth/login",e)},quickShorten:function(e){return L.post("/api/url/quick_create",e)},createShorUrl:function(e){return L.post("/api/url/create",e)},redirect:function(e){return L.put("/api/url/redirect/".concat(e))},getDashboard:function(){return L.get("/api/url/dashboard")},searchUrl:function(e){return L.get("/api/url/search",{params:{longUrl:e}})},deleteUrl:function(e){return L.delete("/api/url/delete/".concat(e))}},j=a(103),N=a(62),I=a(102),w=a(107),k=a(108),R=Object(u.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn}}),(function(e){return{logout:function(){return e((function(e){localStorage.removeItem("token"),localStorage.removeItem("user"),e({type:"LOGOUT"})}))}}}))((function(e){var t=e.isLoggedIn,a=e.logout;return n.a.createElement(w.a,{bg:"light"},n.a.createElement(w.a.Brand,{href:"/"},n.a.createElement("h3",{className:"primary-text my-4 ml-4"},n.a.createElement("strong",null,"C.URL"))),t?n.a.createElement(k.a,{className:"ml-auto mr-4 my-4"},n.a.createElement(I.a,{variant:"secondary",onClick:a},"Logout")):n.a.createElement(k.a,{className:"ml-auto mr-4 my-4"},n.a.createElement(k.a.Link,{href:"/login"},"Login")))})),C=a(23),_=a(18),A=a(109),D=a(106),T=function(){return function(){var e=Object(v.a)(y.a.mark((function e(t){var a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.getDashboard();case 3:a=e.sent,r=a.data,t({type:"GET_DASHBOARD_SUCCESS",payload:r}),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.t0.response&&S.b.error(e.t0.response.data.error),t({type:"GET_DASHBOARD_FAILURE"});case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},G=Object(u.b)((function(e){return{url:e.url,auth:e.auth}}),(function(e){return{quickShorten:function(t){return e(function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var r,n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.quickShorten(e);case 3:r=t.sent,n=r.data,a({type:"SHORTEN_URL_SUCCESS",payload:n}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0),t.t0.response&&S.b.error(t.t0.response.data.error),a({type:"SHORTEN_URL_FAILURE"});case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))},createShortUrl:function(t){return e(function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var r,n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.createShorUrl(e);case 3:r=t.sent,n=r.data,a(T()),a({type:"SHORTEN_URL_SUCCESS",payload:n}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0),t.t0.response&&S.b.error(t.t0.response.data.error),a({type:"SHORTEN_URL_FAILURE"});case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=e.url,a=e.auth,c=e.createShortUrl,l=e.quickShorten,o=Object(r.useState)({longUrl:""}),s=Object(_.a)(o,2),u=s[0],i=s[1],m=Object(r.useState)((function(){return window.location.hostname})),d=Object(_.a)(m,1)[0];return n.a.createElement(A.a,{className:"text-center shorten-url-card"},n.a.createElement(S.a,null),n.a.createElement(A.a.Body,null,n.a.createElement(A.a.Title,null,"Enter your URL here!"),n.a.createElement(D.a,{onSubmit:function(e){return function(e){e.preventDefault(),new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(u.longUrl)?a.isLoggedIn?c(u):l(u):S.b.error("Invalid URL entered!")}(e)}},n.a.createElement(D.a.Group,null,n.a.createElement(D.a.Control,{type:"text",placeholder:"Paste your URL here...",name:"longUrl",value:u.longUrl,onChange:function(e){return function(e){i(Object(p.a)(Object(p.a)({},u),{},Object(C.a)({},e.target.name,e.target.value)))}(e)}})),n.a.createElement(I.a,{variant:"primary",type:"submit"},"Submit"))),t.shortened&&n.a.createElement(A.a.Footer,{className:"text-muted"},"Short URL :",n.a.createElement("a",{href:"/".concat(t.shortUrl)},"".concat(d,"/").concat(t.shortUrl)," "),n.a.createElement("span",{className:"copy-btn"},n.a.createElement(I.a,{size:"sm",variant:"success",onClick:function(){navigator.clipboard.writeText("".concat(d,"/").concat(t.shortUrl).trim()),S.b.success("Copied!")}},"Copy"))))})),F=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(R,null),n.a.createElement(j.a,{className:"my-4"},n.a.createElement(N.a,{sm:6,className:"center-content"},n.a.createElement("legend",{className:"text-center"},"Try it now :"),n.a.createElement(G,null),n.a.createElement("p",{className:"text-center my-4",style:{padding:"20px",fontSize:"1.3rem"}},"Get access to all other features for free. Just create an account with us and you're all set!"),n.a.createElement("p",{className:"text-center my-4"},n.a.createElement("a",{href:"/signup"},n.a.createElement(I.a,{variant:"primary",size:"lg"},"Signup Now",n.a.createElement("br",null),n.a.createElement("small",null,"It's free!"))))),n.a.createElement(N.a,{sm:6,className:"center-content"},n.a.createElement("legend",{className:"text-center"},"Our Features:"),n.a.createElement(j.a,{className:"my-4"},n.a.createElement(N.a,{sm:6},n.a.createElement("p",{className:"text-center"},n.a.createElement("img",{src:"/images/easy.png",className:"img-feature",alt:"feature"})),n.a.createElement("p",{className:"primary-text text-center"},"Free and Easy to use")),n.a.createElement(N.a,{sm:6},n.a.createElement("p",{className:"text-center"},n.a.createElement("img",{src:"/images/secure.png",className:"img-feature",alt:"feature"})),n.a.createElement("p",{className:"primary-text text-center"},"Secure and Reliable"))),n.a.createElement(j.a,{className:"my-4"},n.a.createElement(N.a,{sm:6},n.a.createElement("p",{className:"text-center"},n.a.createElement("img",{src:"/images/https.png",className:"img-feature",alt:"feature"})),n.a.createElement("p",{className:"primary-text text-center"},"HTTPS support enabled")),n.a.createElement(N.a,{sm:6},n.a.createElement("p",{className:"text-center"},n.a.createElement("img",{src:"/images/analytics.png",className:"img-feature",alt:"feature"})),n.a.createElement("p",{className:"primary-text text-center"},"Custom dashboard with",n.a.createElement("br",null)," number of clicks on each link"))))))},H=a(104),B=Object(u.b)((function(e,t){return{isLoggedIn:e.auth.isLoggedIn,type:t.type}}),(function(e,t){return{submitForm:"signup"===t.type?function(t){return e(function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var r,n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.signup(e);case 3:r=t.sent,n=r.data,localStorage.setItem("token",n.token),localStorage.setItem("user",n.email),a({type:"LOGIN_SUCCESS",payload:n.email}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0),t.t0.response&&S.b.error(t.t0.response.data.error),a({type:"LOGIN_FAILURE"});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))}:function(t){return e(function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var r,n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.login(e);case 3:r=t.sent,n=r.data,localStorage.setItem("token",n.token),localStorage.setItem("user",n.email),a({type:"LOGIN_SUCCESS",payload:n.email}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0),t.t0.response&&S.b.error(t.t0.response.data.error),a({type:"LOGIN_FAILURE"});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=Object(r.useState)({email:"",password:""}),a=Object(_.a)(t,2),c=a[0],l=a[1],o=function(e){l(Object(p.a)(Object(p.a)({},c),{},Object(C.a)({},e.target.name,e.target.value)))};return e.isLoggedIn?n.a.createElement(s.a,{to:"/dashboard"}):n.a.createElement(r.Fragment,null,n.a.createElement(R,null),n.a.createElement(H.a,{className:"center-content"},n.a.createElement(S.a,null),n.a.createElement(D.a,{className:"login-form my-4",onSubmit:function(t){return function(t){t.preventDefault(),e.submitForm(c)}(t)}},n.a.createElement("legend",{className:"text-center primary-text"},"Login/Signup to continue :"," "),n.a.createElement("hr",null),n.a.createElement(D.a.Group,{controlId:"formBasicEmail"},n.a.createElement(D.a.Label,null,"Email address"),n.a.createElement(D.a.Control,{type:"email",placeholder:"Enter email",name:"email",onChange:function(e){return o(e)},value:c.email,required:!0})),n.a.createElement(D.a.Group,{controlId:"formBasicPassword"},n.a.createElement(D.a.Label,null,"Password"),n.a.createElement(D.a.Control,{type:"password",placeholder:"Password",name:"password",onChange:function(e){return o(e)},value:c.password,required:!0})),n.a.createElement(I.a,{variant:"primary",type:"submit"},"Submit"))))})),z=a(105),q=Object(u.b)((function(e){return{dashboard:e.dashboard}}),(function(e){return{getDashboard:function(){return e(T())},deleteUrl:function(t){return e(function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.deleteUrl(e);case 3:a(T()),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),t.t0.response&&S.b.error(t.t0.response.data.error);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}(t))},searchUrl:function(t){return e(function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var r,n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"DASHBOARD_REQUEST"}),t.next=4,x.searchUrl(e);case 4:r=t.sent,n=r.data,console.log(n),a({type:"GET_DASHBOARD_SUCCESS",payload:[n]}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),t.t0.response&&S.b.error(t.t0.response.data.error),a({type:"GET_DASHBOARD_FAILURE"});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=e.dashboard,a=e.getDashboard,c=e.deleteUrl,l=e.searchUrl,o=Object(r.useState)(""),s=Object(_.a)(o,2),u=s[0],i=s[1],m=Object(r.useState)((function(){return window.location.hostname})),p=Object(_.a)(m,1)[0];Object(r.useEffect)((function(){a()}),[]);return t.loading?n.a.createElement("div",null,"Loading..."):n.a.createElement(n.a.Fragment,null,n.a.createElement(S.a,null),n.a.createElement(D.a,{className:"my-4",onSubmit:function(e){return function(e){e.preventDefault(),l(u)}(e)}},n.a.createElement(D.a.Group,null,n.a.createElement(D.a.Label,null," Search by Long URL :"),n.a.createElement(D.a.Control,{type:"text",placeholder:"Enter long url to search",name:"search",value:u,onChange:function(e){return function(e){i(e.target.value)}(e)},style:{width:"22rem"}})),n.a.createElement(I.a,{variant:"secondary",type:"submit"},"Search"),n.a.createElement(I.a,{variant:"secondary",className:"ml-4",onClick:function(){window.location.reload()}},"Clear")),n.a.createElement(z.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"my-4"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Long URL"),n.a.createElement("th",null,"Short URL"),n.a.createElement("th",null,"No. of Clicks"),n.a.createElement("th",null,"Delete"))),n.a.createElement("tbody",null,t.urls.map((function(e){return n.a.createElement("tr",{key:e._id},n.a.createElement("td",null,n.a.createElement("a",{href:e.longUrl},e.longUrl)),n.a.createElement("td",null,n.a.createElement("a",{href:"/".concat(e.shortUrl)},"".concat(p,"/").concat(e.shortUrl)," "),n.a.createElement("span",{className:"copy-btn"},n.a.createElement(I.a,{size:"sm",variant:"success",onClick:function(){navigator.clipboard.writeText("".concat(p,"/").concat(e.shortUrl).trim()),S.b.success("Copied")}},"Copy"))),n.a.createElement("td",null,e.clicks),n.a.createElement("td",null,n.a.createElement(I.a,{variant:"danger",onClick:function(){return c(e._id)}},n.a.createElement("i",{className:"fa fa-trash"}))))})))))})),P=Object(u.b)((function(e){return{user:e.auth.user}}))((function(e){var t=e.user;return n.a.createElement(n.a.Fragment,null,n.a.createElement(R,null),n.a.createElement(H.a,{className:"center-content my-4"},n.a.createElement("legend",{className:"text-center"},"Logged in as : ",n.a.createElement("span",{className:"primary-text"},t)),n.a.createElement(G,null),n.a.createElement(q,null)))})),J=a(63),M=Object(u.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn}}))((function(e){var t=e.isLoggedIn,a=e.component,r=Object(J.a)(e,["isLoggedIn","component"]);return n.a.createElement(s.b,Object.assign({},r,{render:function(e){return t?n.a.createElement(a,e):n.a.createElement(s.a,{to:"/login"})}}))})),Q=function(e){var t=Object(r.useState)(!0),a=Object(_.a)(t,2),c=a[0],l=a[1];return Object(r.useEffect)((function(){Object(v.a)(y.a.mark((function t(){var a,r,n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.match.params.shortUrl,t.next=4,x.redirect(a);case 4:r=t.sent,n=r.data,console.log(n),l(!1),window.location.href=n.longUrl,t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),console.error(t.t0),l(!1),window.location.href="/not/found";case 16:case"end":return t.stop()}}),t,null,[[0,11]])})))()}),[]),c?n.a.createElement("div",{className:"center-content",style:{fontSize:"1.2rem"}},"Redirecting...."):null},$=function(){return n.a.createElement("div",{className:"center-content primary-text my-4"},n.a.createElement("p",{className:"display-3"},"404"),n.a.createElement("p",null,"Oops....looks like you've hit a broken link!"))};a(53);var K=function(){return Object(r.useEffect)((function(){h.dispatch((function(e){var t=localStorage.getItem("token"),a=localStorage.getItem("user");e(t&&a?{type:"LOGIN_SUCCESS",payload:localStorage.getItem("user")}:{type:"LOGIN_FAILURE"})}))})),n.a.createElement(u.a,{store:h},n.a.createElement(o.a,null,n.a.createElement(s.d,null,n.a.createElement(s.b,{path:"/",exact:!0,component:F}),n.a.createElement(s.b,{path:"/login",exact:!0,component:B}),n.a.createElement(s.b,{path:"/signup",exact:!0,render:function(){return n.a.createElement(B,{type:"signup"})}}),n.a.createElement(M,{path:"/dashboard",exact:!0,component:P}),n.a.createElement(s.b,{path:"/:shortUrl",exact:!0,component:Q}),n.a.createElement(s.b,{component:$}))))};a(96),a(97);l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(K,null)),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.2388d7ff.chunk.js.map